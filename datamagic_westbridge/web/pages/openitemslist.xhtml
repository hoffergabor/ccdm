<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	template="/pages/template.xhtml">


	<ui:define name="body">
		<div class="content textcolor1 backgroundcolor3"><h:form
			id="openitemform" target="mywindow">
			<p:panel styleClass="gradpanel" id="panel">
				<div class="innerPanel"><p:dataTable style="text-align:left"
					selectionMode="single" rows="10" paginator="true"
					paginatorPosition="top" paginatorAlwaysVisible="false"
					emptyMessage="#{msg.NODATA}" dynamic="true"
					value="#{openitemsserviceController.data.openItemList}" var="data"
					id="openitemTable">
					<p:column sortBy="#{data.kimeno}" style="min-width:50px">
						<f:facet name="header">
							<h:outputText value="#{msg.INVOICELIST_INOUT}" />
						</f:facet>
						<h:graphicImage
							url="#{data.kimeno ? '../img/kimeno.png' : '../img/bejovo.png'}" />
					</p:column>
					<p:column sortBy="#{data.sorszam}" style="min-width:100px">
						<f:facet name="header">
							<h:outputText value="#{msg.ORDERS_ORDERVIEW_ORDERNUM}" />
						</f:facet>
						<h:outputText value="#{data.sorszam}" styleClass="bold" />
					</p:column>
					<p:column sortBy="#{data.cegnev}" style="min-width:250px">
						<f:facet name="header">
							<h:outputText value="#{msg.INVOICELIST_COMPANY}" />
						</f:facet>
						<h:outputText value="#{data.cegnev}" />
					</p:column>
					<p:column sortBy="#{data.telephely.nev}" style="min-width:250px">
						<f:facet name="header">
							<h:outputText value="Telephely" />
						</f:facet>
						<h:outputText value="#{data.telephely.nev}" />
					</p:column>
					<p:column sortBy="#{data.kelt}"
						style="min-width:120px;text-align:center">
						<f:facet name="header">
							<h:outputText value="#{msg.INVOICELIST_FILE}" />
						</f:facet>
						<h:outputText
							value="#{data.kelt!='1900-01-01 00:00:00.0'? data.kelt:'-'}">
							<f:convertDateTime pattern="#{msg.DATEFORMAT3}"
								timeZone="Europe/Budapest" />
						</h:outputText>
					</p:column>
					<p:column sortBy="#{data.esedkelt}"
						style="min-width:120px;text-align:center">
						<f:facet name="header">
							<h:outputText value="#{msg.INVOICELIST_DUE}" />
						</f:facet>
						<h:outputText
							value="#{data.esedkelt!='1900-01-01 00:00:00.0'? data.esedkelt:'-'}">
							<f:convertDateTime pattern="#{msg.DATEFORMAT3}"
								timeZone="Europe/Budapest" />
						</h:outputText>
					</p:column>
					<p:column sortBy="#{data.telj}"
						style="min-width:120px;text-align:center">
						<f:facet name="header">
							<h:outputText value="#{msg.INVOICELIST_COMPLETED}" />
						</f:facet>
						<h:outputText
							value="#{data.telj!='1900-01-01 00:00:00.0'? data.telj:'-'}">
							<f:convertDateTime pattern="#{msg.DATEFORMAT3}"
								timeZone="Europe/Budapest" />
						</h:outputText>
					</p:column>
					<p:column sortBy="#{data.realesed}"
						style="min-width:120px;text-align:center">
						<f:facet name="header">
							<h:outputText value="#{msg.INVOICELIST_WARRANT}" />
						</f:facet>
						<h:outputText
							value="#{data.realesed!='1900-01-01 00:00:00.0'? data.realesed:'-'}">
							<f:convertDateTime pattern="#{msg.DATEFORMAT3}"
								timeZone="Europe/Budapest" />
						</h:outputText>
					</p:column>
					<p:column sortBy="#{data.fizetve}"
						style="min-width:120px;text-align:center">
						<f:facet name="header">
							<h:outputText value="#{msg.INVOICELIST_PAYMENT}" />
						</f:facet>
						<h:outputText
							value="#{data.fizetve!='1900-01-01 00:00:00.0'? data.fizetve:'-'}">
							<f:convertDateTime pattern="#{msg.DATEFORMAT3}"
								timeZone="Europe/Budapest" />
						</h:outputText>
					</p:column>
					<p:column sortBy="#{data.dnetto}"
						style="min-width:80px;text-align:right">
						<f:facet name="header">
							<h:outputText value="#{msg.ORDERS_ORDERVIEW_NET}" />
						</f:facet>
						<h:outputText value="#{data.netto}">
							<f:convertNumber pattern="#,##0" />
						</h:outputText>
						<h:outputText value=" #{data.devnem}"></h:outputText>
					</p:column>
					<p:column sortBy="#{data.dbrutto}"
						style="text-align:right;min-width:80px">
						<f:facet name="header">
							<h:outputText value="#{msg.ORDERS_ORDERVIEW_GRO}" />
						</f:facet>
						<h:outputText value="#{data.brutto}">
							<f:convertNumber pattern="#,##0" />
						</h:outputText>
						<h:outputText value=" #{data.devnem}"></h:outputText>
					</p:column>
					<p:column sortBy="#{data.rossz}"
						style="text-align:right;min-width:80px">
						<f:facet name="header">
							<h:outputText value="FIZETVE" />
						</f:facet>
						<h:outputText value="#{data.rossz}">
							<f:convertNumber pattern="#,##0" />
						</h:outputText>
						<h:outputText value=" #{data.devnem}"></h:outputText>
					</p:column>
					<p:column sortBy="#{data.arrears}"
						style="text-align:right;min-width:80px">
						<f:facet name="header">
							<h:outputText value="HATRALEK" />
						</f:facet>
						<h:outputText value="#{data.arrears}">
							<f:convertNumber pattern="#,##0" />
						</h:outputText>
						<h:outputText value=" #{data.devnem}"></h:outputText>
					</p:column>
					<p:column sortBy="#{data.fizmod}" style="min-width:100px">
						<f:facet name="header">
							<h:outputText value="#{msg.INVOICELIST_PAYMENTMODE}" />
						</f:facet>
						<h:outputText value="#{data.fizmod}" />
					</p:column>
				</p:dataTable></div>
				<div class="summaryPanel"><h:panelGroup id="summaryPanel">
					<table width="100%" border="0" cellspacing="0" cellpadding="0">
						<tr>
							<td width="40%"><label>#{msg.ORDERS_ORDERVIEW_SUMMARY}</label>
							</td>
							<td width="20%"><label>#{msg.ORDERS_ORDERVIEW_NET}</label></td>
							<td width="20%"><label>#{msg.ORDERS_ORDERVIEW_GRO}</label></td>
							<td width="20%" class="last"><label>#{msg.ARREARS}</label></td>
						</tr>
						<tr>
							<td width="40%"></td>
							<td width="20%"><h:outputText
								value="#{openitemsserviceController.data.netto}">
								<f:convertNumber pattern="#,##0" />
							</h:outputText></td>
							<td width="20%"><h:outputText
								value="#{openitemsserviceController.data.brutto}">
								<f:convertNumber pattern="#,##0" />
							</h:outputText></td>
							<td width="20%" class="last"><h:outputText
								value="#{openitemsserviceController.data.arrears}">
								<f:convertNumber pattern="#,##0" />
							</h:outputText></td>
						</tr>
					</table>
				</h:panelGroup></div>
				<div class="bottomFilterBar">
				<div class="bottomFilterBarFilters"><p:commandButton
					process="@this" value="Telephelyek"
					oncomplete="partnerchoosewid.show()" update="cpp"
					rendered="#{openitemsserviceController.managedPartner!=null and !empty openitemsserviceController.managedStores}"
					actionListener="#{openitemsserviceController.showStores}"></p:commandButton>
				</div>
				<h:panelGroup rendered="#{openitemsserviceController.managedWorker!=null}">
				<div class="bottomFilterBarDates"><h:panelGroup>
					<div class="bottomFilterBarDateFilter"><p:calendar
						value="#{openitemsserviceController.data.from}"
						selectListener="#{openitemsserviceController.invoiceDateFromChange}"
						pattern="#{msg.DATEFORMAT}" inputStyle="width:100px">
					</p:calendar></div>
					<div class="bottomFilterBarDateFilter"><label
						class="textcolor4"> #{msg.INVOICESTORNFIX_DATEFROM}</label></div>

					<div class="bottomFilterBarDateFilter"><p:calendar
						value="#{openitemsserviceController.data.to}"
						selectListener="#{openitemsserviceController.invoiceDateToChange}"
						pattern="#{msg.DATEFORMAT}" inputStyle="width:100px">
					</p:calendar></div>
					<div class="bottomFilterBarDateFilter"><label
						class="textcolor4"> #{msg.INVOICESTORNFIX_DATETO}</label></div>

					<p:commandButton process="@this" value="Szűrés"
						update="panel,message" styleClass="filterSubmitButton"
						actionListener="#{openitemsserviceController.invoiceDateChange}"></p:commandButton>
					<p:commandButton update="panel" styleClass="filterResetButton"
						actionListener="#{openitemsserviceController.resetAction}"
						value="reset" process="@this"></p:commandButton>
				</h:panelGroup></div></h:panelGroup>
				</div>
				<h:commandLink
					disabled="#{empty openitemsserviceController.data.openItemList}"
					value="#{msg.ORDERS_PRINT_BUTTON1}" styleClass="commonButtonLink"
					immediate="true" action="#{openitemsserviceController.print}">
				</h:commandLink>
				<div class="clear"></div>
			</p:panel>
			<p:growl id="message" showDetail="true" sticky="false" life="4000"
				showSummary="true" />

			<p:dialog widgetVar="partnerchoosewid" modal="false" closable="true"
				styleClass="commonDialog" draggable="true"
				header="Válassza ki a partnert" resizable="false">
				<h:panelGroup id="cpp">
					<div class="choosepartner-sales-form">
					<div class="popupSearch"><h:inputText styleClass="input"
						value="#{openitemsserviceController.data.partnerSearchText}"></h:inputText>
					<p:commandButton value="Keresés" update="cpp"
						styleClass="popupSearchButton"
						action="#{openitemsserviceController.searchPartnerAction}" /></div>
					<div class="partnerSearchList"
						style="width: 265px; height: 410px; overflow-x: hidden; overflow-y: scroll; border: 1px solid #ccc; padding: 5px; margin-bottom: 20px; background: #eee;">
					<ui:repeat value="#{openitemsserviceController.data.allPartner}"
						var="data" id="partners">
						<p:commandLink value="#{data[0]}" update="panel" process="@this"
							oncomplete="showstore()">
							<f:setPropertyActionListener value="#{data[1]}"
								target="#{openitemsserviceController.data.selectedPartnerId}" />
						</p:commandLink>
						<br />
					</ui:repeat></div>
					</div>
				</h:panelGroup>
			</p:dialog>

			<p:remoteCommand name="showstore"
				action="#{openitemsserviceController.submitChooseStore}"
				oncomplete="partnerchoosewid.hide()" update="panel" process="@this"></p:remoteCommand>


			<script type="text/javascript">
	function newWindow() {
		window.open('', 'mywindow', 'width=1000,height=700');
		return false;
	}
</script>
		</h:form></div>

		<div class="helpContent" onclick="RemoveHelp();" id="help">
		<div class="headerHelp"></div>
		<div class="menuHelp">
		<div class="helpBubble"
			style="top: 100px; left: 670px; border-top-left-radius: 0; -moz-border-radius-topleft: 0; -webkit-border-top-left-radius: 0;">
		A <strong>NYITOTT TÉTELEK</strong> menüpontban van, itt láthatja
		kiegyenlítetlen számláit, illetve összegzést a nyitott tételekről.</div>
		</div>
		<div class="contentHelp">
		<div class="helpBubble"
			style="top: 300px; left: 670px; border-top-right-radius: 0; -moz-border-radius-topright: 0; -webkit-border-top-right-radius: 0;">
		Ebben a listában láthatja a dátum szűrés eredményét, <strong>egy
		adott időszakon belüli nyitott tételeinek listáját.</strong></div>
		</div>
		<div class="contentHelp">
		<div class="helpBubble"
			style="top: 550px; left: 160px; border-bottom-left-radius: 0; -moz-border-radius-bottomleft: 0; -webkit-border-bottom-left-radius: 0;">
		A dátumok beállításával meghatározhatja melyik időszak nyitott
		tételeit szeretné megtekinteni</div>
		</div>
		<div class="footerHelp">
		<div class="helpBubble"
			style="top: 575px; right: 80px; border-bottom-right-radius: 0; -moz-border-radius-bottomright: 0; -webkit-border-bottom-right-radius: 0;">
		Ki<strong>NYOMTAT</strong>hatja az éppen látható listát.</div>
		</div>
		</div>
	</ui:define>
</ui:composition>