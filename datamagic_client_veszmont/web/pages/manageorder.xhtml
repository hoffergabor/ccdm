<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	template="/pages/template.xhtml">

	<ui:define name="body">
		<div class="content"><h:form id="neworderform">
			<p:panel styleClass="gradpanel" id="panel">
				<div class="manageNotificationOdd">
				<div class="manageNotificationStepNumber">1</div>
				<div class="manageNotificationRow">
				<div class="manageNotificationRowSubject">Egyszerű keresés</div>
				<div class="manageNotificationRowForm lessPadding orderSearch"><label>#{msg.ORDERS_ORDERVIEW_SKU}:
				</label> <h:inputText id="sku" styleClass="manageNotificationTextField"
					value="#{manageorderserviceController.data.sku}"></h:inputText> <label>#{msg.NEWORDER_NAME}
				</label> <h:inputText id="productname"
					value="#{manageorderserviceController.data.productName}"
					styleClass="manageNotificationTextField"></h:inputText> <p:commandButton
					style="margin-top:10px;" value="#{msg.NEWORDER_SEARCH_BUTTON1}"
					styleClass="manageNotificationSelectButton" type="submit"
					action="#{manageorderserviceController.productSearchAction}"
					update="productTable,productname,sku,tabPanel" /></div>
				<div class="clear"></div>
				</div>
				</div>


				<div class="manageNotificationEven">
				<div class="manageNotificationStepNumber">2</div>
				<div class="manageNotificationRow">
				<div class="manageNotificationRowSubject">Részletes keresés</div>
				<div
					class="manageNotificationRowForm morePaddingOnlyText orderFilter">
				<table border="0" cellspacing="0" cellpadding="0">
					<tr>
						<td><h:selectOneListbox id="level1" size="8"
							value="#{manageorderserviceController.data.categoryId1}">
							<f:selectItem itemValue="1001" itemLabel="Italáruk"></f:selectItem>
							<f:selectItem itemValue="1002" itemLabel="Dohányáruk"></f:selectItem>
							<f:selectItem itemValue="1003" itemLabel="Élelmiszer"></f:selectItem>
							<f:selectItem itemValue="1004" itemLabel="Pipere és Kozmetikum"></f:selectItem>
							<f:selectItem itemValue="1005"
								itemLabel="Háztartási és Vegyi áru"></f:selectItem>
							<f:selectItem itemValue="1008" itemLabel="Állateledel"></f:selectItem>
							<f:selectItem itemValue="1017"
								itemLabel="Csemege, mirelit és húsáruk"></f:selectItem>
							<f:selectItem itemValue="1020" itemLabel="Zöldség, Gyümölcs"></f:selectItem>
							<f:selectItem itemValue="1021" itemLabel="Sajtok"></f:selectItem>
							<f:selectItem itemValue="1022" itemLabel="Gasztro termékek"></f:selectItem>
							<p:ajax event="change" update="level2,productTable,level3,level4"
								action="#{manageorderserviceController.showProductsLevel1}"></p:ajax>
						</h:selectOneListbox></td>
						<td><h:selectOneListbox id="level2" size="8"
							value="#{manageorderserviceController.data.categoryId2}">
							<f:selectItems
								value="#{manageorderserviceController.data.level2}" var="data"
								itemLabel="#{data[1]}" itemValue="#{data[0]}"></f:selectItems>
							<p:ajax event="change" update="level2,productTable,level3,level4"
								action="#{manageorderserviceController.showProductsLevel2}"></p:ajax>
						</h:selectOneListbox></td>
						<td><h:selectOneListbox id="level3" size="8"
							value="#{manageorderserviceController.data.categoryId3}">
							<f:selectItems
								value="#{manageorderserviceController.data.level3}" var="data"
								itemLabel="#{data[1]}" itemValue="#{data[0]}"></f:selectItems>
							<p:ajax event="change" update="level2,productTable,level3,level4"
								action="#{manageorderserviceController.showProductsLevel3}"></p:ajax>
						</h:selectOneListbox></td>
						<td><h:selectOneListbox id="level4" size="8"
							value="#{manageorderserviceController.data.categoryId4}">
							<f:selectItems
								value="#{manageorderserviceController.data.level4}" var="data"
								itemLabel="#{data[1]}" itemValue="#{data[0]}"></f:selectItems>
							<p:ajax event="change" update="level2,productTable,level3,level4"
								action="#{manageorderserviceController.showProductsLevel4}"></p:ajax>
						</h:selectOneListbox></td>
					</tr>
				</table>
				</div>
				</div>
				</div>
				<div class="clear">&nbsp;</div>
				<div class="manageNotificationOdd">
				<div class="manageNotificationStepNumber">3</div>
				<div class="manageNotificationRow">
				<div class="manageNotificationRowForm newOrderListTabView"><p:tabView
					dynamic="true" id="tabPanel" cache="false"
					activeIndex="#{manageorderserviceController.data.selectedTabIndex}">
					<p:tab title="#{msg.NEWORDER_SEARCH_TITLE}" id="searchTab">
						<div class="innerPanel"><p:dataTable rows="10"
							paginator="true" selectionMode="single" paginatorPosition="top"
							style="text-align: left" paginatorAlwaysVisible="false"
							value="#{manageorderserviceController.data.products}" var="data"
							id="productTable" dynamic="true" emptyMessage="#{msg.NODATA}">
							<p:column sortBy="#{data.cikkszam}">
								<f:facet name="header">
									<h:outputText value="#{msg.NEWORDER_ELEMENTS_SKU}" />
								</f:facet>
								<h:outputText value="#{data.cikkszam}" styleClass="bold" />
							</p:column>
							<p:column sortBy="#{data.megn}">
								<f:facet name="header">
									<h:outputText value="#{msg.NEWORDER_ELEMENTS_NAME}" />
								</f:facet>
								<h:outputText value="#{data.megn}" />
							</p:column>
							<p:column sortBy="#{data.ear}">
								<f:facet name="header">
									<h:outputText value="#{msg.NEWORDER_ELEMENTS_PRICE}" />
								</f:facet>
								<h:outputText value="#{data.ear}">
									<f:convertNumber pattern="#,##0" />
								</h:outputText>
							</p:column>
							<p:column sortBy="#{data.devnem}">
								<f:facet name="header">
									<h:outputText value="#{msg.DEVIZA}" />
								</f:facet>
								<h:outputText value="#{data.devnem}" />
							</p:column>
							<p:column>
								<p:commandButton value="+" styleClass="editbutton"
									oncomplete="additem()" global="false">
									<f:setPropertyActionListener value="#{data}"
										target="#{manageorderserviceController.data.selectedProduct}" />
								</p:commandButton>
							</p:column>
						</p:dataTable></div>
					</p:tab>

					<p:tab title="#{msg.NEWORDER_ELEMENTS_TITLE}" id="productItemTab">
						<div class="innerPanel"><p:dataTable
							style="text-align:left;" selectionMode="single"
							update="orderItemTable"
							value="#{manageorderserviceController.data.orderProductList}"
							var="data" id="orderItemTable" emptyMessage="#{msg.NODATA}"
							dynamic="true">
							<p:column sortBy="#{data.cikkszam}">
								<f:facet name="header">
									<h:outputText value="#{msg.NEWORDER_ELEMENTS_SKU}" />
								</f:facet>
								<h:outputText value="#{data.cikkszam}" styleClass="bold" />
							</p:column>
							<p:column sortBy="#{data.megn}">
								<f:facet name="header">
									<h:outputText value="#{msg.NEWORDER_ELEMENTS_NAME}" />
								</f:facet>
								<h:outputText value="#{data.megn}" />
							</p:column>
							<p:column sortBy="#{data.mennyiseg}">
								<f:facet name="header">
									<h:outputText value="#{msg.NEWORDER_ELEMENTS_AMOUNT}" />
								</f:facet>
								<h:inputText value="#{data.mennyiseg}" size="4">
									<f:convertNumber pattern="#,##0" />
									<p:ajax event="change" oncomplete="changequantity()" />
								</h:inputText>
							</p:column>
							<p:column sortBy="#{data.ear}">
								<f:facet name="header">
									<h:outputText value="#{msg.NEWORDER_ELEMENTS_PRICE}" />
								</f:facet>
								<h:outputText value="#{data.ear}">
									<f:convertNumber pattern="#,##0" />
								</h:outputText>
							</p:column>
							<p:column sortBy="#{data.netto}">
								<f:facet name="header">
									<h:outputText value="#{msg.NEWORDER_ELEMENTS_NET}" />
								</f:facet>
								<h:outputText value="#{data.ear*data.mennyiseg}">
									<f:convertNumber pattern="#,##0" />
								</h:outputText>
							</p:column>
							<p:column sortBy="#{data.brutto}">
								<f:facet name="header">
									<h:outputText value="#{msg.NEWORDER_ELEMENTS_GRO}" />
								</f:facet>
								<h:outputText value="#{data.ear*data.mennyiseg*data.afa}">
									<f:convertNumber pattern="#,##0" />
								</h:outputText>
							</p:column>
							<p:column>
								<p:commandButton value="X" styleClass="editbutton"
									oncomplete="deleteitem()" global="false">
									<f:setPropertyActionListener value="#{data}"
										target="#{manageorderserviceController.data.selectedProduct}" />
								</p:commandButton>
							</p:column>
						</p:dataTable></div>
					</p:tab>
					<p:tab title="Szállítás" id="shippingTab">
						<div class="innerPanel"><h:panelGroup id="shippingdata" styleClass="shippingDataUpdate">
							<div class="left"><div class="orderShippingRadio">
							<label class="importantData">Ki végzi a szállítást? <span class="rightFloat"><h:selectOneRadio
								id="shippingoption"
								value="#{manageorderserviceController.data.shippingOption}">
								<f:selectItem itemValue="1" itemLabel="Házhozszállítás" />
								<f:selectItem itemValue="2" itemLabel="Telephely átvétel" />
								<p:ajax event="change" update="shippingdata" process="@this" />
							</h:selectOneRadio></span></label></div></div><div class="clear"><br /></div>
							<p:message for="shippingoption" display="text"></p:message>
							<h:panelGroup
								rendered="#{manageorderserviceController.data.shippingOption==1}"><div class="left">
								<label>Név:<h:inputText required="true"
									requiredMessage="Szállítás neve megadása kötelező!"
									id="shippingname"
									value="#{manageorderserviceController.data.shippingName}" /> <p:message
									for="shippingname" display="text" /> </label>
								<label>Irányítószám:<h:inputText maxlength="4" size="4"
									required="true"
									requiredMessage="Irányítószám megadása kötelező!" id="zipcode"
									value="#{manageorderserviceController.data.zipCode}" /> <p:message
									for="zipcode" display="text" /> </label>
								<label>Település:<h:inputText id="town" required="true"
									requiredMessage="Település megadása kötelező!"
									value="#{manageorderserviceController.data.city}" /> <p:message
									for="town" display="text" /> </label>
								<label>Cím:<h:inputText id="address" required="true"
									requiredMessage="Cím megadása kötelező!"
									value="#{manageorderserviceController.data.address}" /> <p:message
									for="address" display="text" /> </label>
								<label>Árut átvevő személy neve:<h:inputText
									value="#{manageorderserviceController.data.contactName}" /> </label>
								<label>Megjegyzés:<h:inputTextarea rows="5" cols="30"
									value="#{manageorderserviceController.data.comment}" /> </label></div>
							</h:panelGroup>
							<h:panelGroup
								rendered="#{manageorderserviceController.data.shippingOption==2}"><div class="left">
								<label>Átvevő neve:<h:inputText></h:inputText> </label></div>
							</h:panelGroup>
						</h:panelGroup></div>
					</p:tab>
					<p:tab title="Fizetés" id="paymentTab">
						<div class="innerPanel shippingDataUpdate">
						<div class="left"><label class="importantData">Fizetési mód? <span class="rightFloat"><h:selectOneRadio layout="pageDirection"
							value="#{manageorderserviceController.data.payOption}"
							id="paytypes">
							<f:selectItem itemValue="1" itemLabel="Utánvétel" />
							<f:selectItem itemValue="2" itemLabel="Átutalás" />
							<f:selectItem itemValue="3" itemLabel="Készpénz" />
							<p:ajax event="change" process="@this" />
						</h:selectOneRadio></span></label></div>
								<div class="clear"></div></div>
					</p:tab>
					<p:tab title="Összegzés" id="summaryTab"></p:tab>
				</p:tabView></div>
				</div>
				</div>


				<p:remoteCommand name="mode" global="false" process="@this"
					actionListener="#{manageorderserviceController.sModeAction}"></p:remoteCommand>
				<p:remoteCommand name="deleteitem" process="@this" global="false"
					update="orderItemTable, summaryPanel, message"
					actionListener="#{manageorderserviceController.deleteProductItem}"></p:remoteCommand>

				<p:remoteCommand name="additem" process="@this" global="false"
					update="orderItemTable, summaryPanel, message"
					actionListener="#{manageorderserviceController.addProductToOrderAction}"></p:remoteCommand>
				<p:remoteCommand name="changequantity" process="@this"
					global="false" update="orderItemTable, summaryPanel"
					actionListener="#{manageorderserviceController.changeQuantity}"></p:remoteCommand>

				<div class="summaryPanel"><h:panelGroup id="summaryPanel">
					<table width="100%" border="0" cellspacing="0" cellpadding="0">
						<tr>
							<td width="60%"><label>#{msg.ORDERS_ORDERVIEW_SUMMARY}</label></td>
							<td width="20%"><label>#{msg.NEWORDER_ELEMENTS_NET}</label></td>
							<td width="20%" class="last"><label>#{msg.NEWORDER_ELEMENTS_GRO}</label></td>
						</tr>
						<tr>
							<td width="60%"></td>
							<td width="20%"><h:outputText
								value="#{manageorderserviceController.data.netto}">
								<f:convertNumber pattern="#,##0" />
							</h:outputText></td>
							<td width="20%" class="last"><h:outputText
								value="#{manageorderserviceController.data.brutto}">
								<f:convertNumber pattern="#,##0" />
							</h:outputText></td>
						</tr>
					</table>
				</h:panelGroup></div>

				<div class="bottomFilterBar">
				<div class="bottomFilterBarFilters"></div>
				<div class="bottomFilterBarDates bottomFilterBarDatesLong">
				<div class="bottomFilterBarDateFilter"><label>#{msg.NEWORDER_DEMAND}</label></div>
				<div class="bottomFilterBarDateFilter"><p:calendar
					value="#{manageorderserviceController.data.orderDate}"
					selectListener="#{manageorderserviceController.orderDateChange}"
					onSelectUpdate="payDate" pattern="#{msg.DATEFORMAT}" /></div>
				<div class="bottomFilterBarDateFilter"><label>#{msg.ORDERS_ORDERVIEW_PAYDATE}:</label></div>
				<div class="bottomFilterBarDateFilter"><h:outputText
					value="#{manageorderserviceController.data.payDate}" id="payDate">
					<f:convertDateTime pattern="#{msg.DATEFORMAT}" />
				</h:outputText></div>
				</div>


				<p:commandButton value="#{msg.NEWORDER_ORDER_BUTTON}"
					process="@this" styleClass="commonButton" update="savepan"
					oncomplete="confirmsave.show()" global="false" /> <p:commandButton
					value="#{msg.SIDEBAR_LOGOUT_BUTTON}" process="@this"
					styleClass="commonButton" update="exit" global="false"
					oncomplete="confirmation.show()" /></div>
			</p:panel>


			<p:dialog widgetVar="confirmation" modal="false" styleClass="dialog3"
				closable="false">
				<h:panelGroup id="exit">
					<p>BIZTOS HOGY KI SZERETNE LEPNI?</p>
					<br />
					<p:commandButton value="OK" styleClass="button" action="orderlist"
						style="width: 70px;text-align: center" global="false" />
					<p:commandButton style="width: 70px; text-align: center"
						value="#{msg.NEWORDER_CANCEL_BUTTON}" styleClass="button"
						onclick="confirmation.hide();return false;" global="false" />
				</h:panelGroup>
			</p:dialog>

			<p:dialog widgetVar="confirmsave" modal="false" styleClass="dialog3"
				closable="true">
				<h:panelGroup id="savepan">
					<p>BIZTOS HOGY LEADJA A RENDELÉST?</p>
					<br />
					<p:commandButton value="#{msg.NEWORDER_ORDER_BUTTON}"
						style="width: 70px;text-align: center" process="@this"
						styleClass="button" update="message,shippingpanel"
						oncomplete="confirmsave.hide();return false;"
						action="#{manageorderserviceController.saveNewOrderaction}" />
					<p:commandButton style="width: 70px; text-align: center"
						value="#{msg.NEWORDER_CANCEL_BUTTON}" styleClass="button"
						onclick="confirmsave.hide();return false;" global="false" />
				</h:panelGroup>
			</p:dialog>


			<p:growl id="message" sticky="false" life="4000" showSummary="true"
				showDetail="true"></p:growl>

		</h:form></div>

	</ui:define>
</ui:composition>